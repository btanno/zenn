---
title: "main.rsã¨lib.rsã¯åŒå±…ã§ãã‚‹"
emoji: "ğŸ“š"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["rust"]
published: false
---

# `main.rs`ã¨`lib.rs`ã¯åŒå±…ã§ãã‚‹

ã‚¿ã‚¤ãƒˆãƒ«é€šã‚Šã€åŒä¸€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å†…ã«`src/main.rs`ã¨`src/lib.rs`ã‚’å…¥ã‚Œã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚ˆã†ã«`src/a.rs`ã€`src/lib.rs`ã€`Cargo.toml`ã‚’ç”¨æ„ã™ã‚‹ã¨ã—ã¾ã™ã€‚

```rust:src/a.rs
pub fn f() {
    println!("a!");
}
```

```rust:src/lib.rs
pub mod a;
```

```toml:Cargo.toml
[package]
name = "app"
# ä»¥ä¸‹ç•¥
```

ã“ã®å ´åˆã€`src/main.rs`ã§ã©ã†ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚‹ã‹ã¨ã„ã†ã¨

```rust:src/main.rs
fn main() {
    app::a::f();
}
```

ã“ã‚“ãªæ„Ÿã˜ã«ãªã‚Šã¾ã™ã€‚

`src/lib.rs`ã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å®£è¨€ã‚’ã¾ã¨ã‚ã¦`src/main.rs`ã‚’ã™ã£ãã‚Šã•ã›ãŸã‚Šã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ãƒã‚¤ãƒŠãƒªã®ä¸¡ã‚¯ãƒ¬ãƒ¼ãƒˆã‚’å…±å­˜ã•ã›ãŸã‚Šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

:::details åŒã˜ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’`lib.rs`ã¨`main.rs`ã®ä¸¡æ–¹ã§å®£è¨€ã—ãŸå ´åˆ

`src/lib.rs`ã¨`src/main.rs`ã«åŒã˜ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å®£è¨€ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã™ã€‚
ä¸Šè¨˜ã®ä¾‹ã‚’ç”¨ã„ã‚‹ã¨ã€

```rust:src/main.rs
mod a;

fn main() {
    app::a::f();
    a::f();
}
```

ã¨ã„ã£ãŸæ„Ÿã˜ã«ãªã‚Šã¾ã™ã€‚
ã§ãã‚‹ã“ã¨ã¯ã§ãã¾ã™ãŒã€ä½•ã‹ä½¿ã„é“ãŒã‚ã‚‹ã®ã‹ã¨ã„ã‚ã‚Œã‚‹ã¨å…¨ç„¶æ€ã„ã¤ã‹ãªã„ã®ã§ãƒ»ãƒ»ãƒ»ã€‚

:::

# ã¡ãªã¿ã«the bookã§ã¯

[The Rust Programming Languageã®7.1](https://doc.rust-lang.org/book/ch07-01-packages-and-crates.html)ã«æ›¸ã„ã¦ã‚ã‚Šã€å¼•ç”¨ã™ã‚‹ã¨

> If a package contains src/main.rs and src/lib.rs, it has two crates: a binary and a library, both with the same name as the package.

ã¨ã‚ã‚‹ã‚ˆã†ã«ã€ãƒã‚¤ãƒŠãƒªã‚¯ãƒ¬ãƒ¼ãƒˆã¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚¯ãƒ¬ãƒ¼ãƒˆãŒåŒã˜åå‰ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦å«ã¾ã‚Œã‚‹çŠ¶æ…‹ã«ãªã‚Šã¾ã™ã€‚